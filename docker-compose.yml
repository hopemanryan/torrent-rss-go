services:
  mongo:
    image: mongo
    container_name: mongo
    restart: always
    environment:
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=root
      - MONGO_INITDB_DATABASE=torrents

    volumes:
      - ./mongo-volume:/app/db/data/mdb  
    ports: 
      - 27017:27017  

  scrapper:
    container_name: torrent-scrapper
    build: 
      context: .
      dockerfile: Dockerfile
    volumes:
      - asset-volume:/app/download
      - db:/app/db/data
    environment:
      - QUIALITY=1080p  
      - TORRENT_LIMIT=3
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=root
      - MONGO_INITDB_DATABASE=torrents
    depends_on:
      - mongo  

  
  plex:
    image: lscr.io/linuxserver/plex:latest
    container_name: plexms
    environment:
      - PUID=1000
      - PGID=1000
      - VERSION=docker
      - ADVERTISE_IP=192.168.0.1:32400/
      - HOSTNAME=PlexServer
      - TZ="Europe/London"
    volumes:
      -  asset-volume:/data/tvshows
      - ./plex/config:/config
    restart: always
    ports:
      - 32400:32400/tcp
      - 3005:3005/tcp
      - 8324:8324/tcp
      - 32469:32469/tcp
      - 1900:1900/udp
      - 32410:32410/udp
      - 32412:32412/udp
      - 32413:32413/udp
      - 32414:32414/udp


volumes:
  asset-volume: 
  db:


